# BLE Temperature Sensor System Instructions

This project allows you to monitor temperature data from a Bluetooth sensor using a Raspberry Pi. It consists of a Flask API, a BLE scanner, and a Dash web app for real-time data visualization.

## Setup the Project on Your Raspberry Pi

Once you’ve received the project folder, follow these steps to get everything up and running:

### 1. Extract the Project Folder
If the project is zipped, unzip it to your preferred directory.

### 2. Open a Terminal
You can either use SSH or open the terminal directly on the Raspberry Pi.

### 3. Navigate to the Project Directory
Use the `cd` command to navigate to the directory where you’ve placed the project.

```bash
cd /path/to/project
```

### 4. Install System Dependencies (if needed)
If your Raspberry Pi does not have Python 3 or the `python3-venv` package installed, you will need to install them. You can manually install them by running:

```bash
sudo apt-get update
sudo apt-get install -y python3-pip python3-venv
```

### 5. Make the Bash Script Executable (if needed)
If the script doesn’t already have execute permissions, make it executable by running:

```bash
chmod +x run_project.sh
```

### 6. Run the Script
Right-click on the `run_project.sh` file and select **Open with Terminal** (or open a terminal manually in the directory). Run the script by typing:

```bash
./run_project.sh
```

### 7. Password Prompt
When the script runs, it will ask for your system password because certain commands (e.g., `sudo apt-get`) require administrator privileges. Enter your password when prompted.

### 8. Let the Script Install Dependencies
The script will automatically create a Python virtual environment, install the necessary packages from `requirements.txt`, and start the Flask API, BLE scanner, and Dash app in the background.

### 9. Access the Dash App
Once the script finishes running, open a web browser and go to `http://<raspberry_pi_ip>:8050/` to see the Dash app.

### 10. Logs
Any logs generated by the Flask API, BLE scanner, or Dash app will be saved in the `Logs` folder. You can view them to troubleshoot any issues.

## Troubleshooting

### If you get a "Port already in use" error
If you have previously run the application and didn't close the port, you can either kill the process or change the port number in the script. To check which processes are using ports, run:

```bash
lsof -i :9000
```

To kill the process using the port, run:

```bash
sudo kill <PID>
```

Where `<PID>` is the Process ID you get from the `lsof` command.

### If you need to install dependencies manually
You can manually install system dependencies by running:

```bash
sudo apt-get update
sudo apt-get install -y python3-pip python3-venv
```

### Change Port for the Flask API
If the default port 9000 is already in use or you want to change it, you can modify the `flask_api.py` and `run_project.sh` script:

1. Open `flask_api.py` and change the port from 9000 to a new one (e.g., 9001).
2. In `run_project.sh`, change the line that runs the Flask API to match the new port:

   ```bash
   python3 flask_api.py --port=9001
   ```

### AirPlay Port Conflict
If you encounter an error where the Flask API port is already in use and you suspect AirPlay is using it, you can either:

1. Disable AirPlay from the **System Preferences > General > AirDrop & Handoff** section.
2. Change the port number of the Flask API as shown in the steps above.

## Project Structure

- `ble_scan.py`: Scans for Bluetooth sensors and retrieves temperature data.
- `flask_api.py`: Provides a RESTful API to access the temperature data.
- `dash_app.py`: Displays the temperature data in a user-friendly Dash web app.
- `run_project.sh`: Bash script to install dependencies and run the app.
- `requirements.txt`: List of Python dependencies.
- `Logs/`: Folder where the logs for Flask API, BLE scanner, and Dash app will be saved.

## Dependencies

You will need the following dependencies installed on your Raspberry Pi:

- Python 3
- `pip` (for installing Python packages)
- `python3-venv` (for creating a virtual environment)

The `run_project.sh` script will handle the installation of Python dependencies, but make sure your system has the necessary Python version and packages installed.

## License

This project is licensed under the MIT License.
```

---

### In this complete `README.md`, the following steps are included:
1. **Extracting the folder and navigating to the project directory**.
2. **Installation of dependencies** (including system requirements and Python dependencies).
3. **Execution of the Bash script** for setting up the environment and running the application.
4. **Access to the Dash app** once everything is set up.
5. **Log handling** (logs are saved in the `Logs/` folder).
6. **Troubleshooting steps** for common issues like port conflicts.
7. **Changing ports** for the Flask API if the default port is already in use.
